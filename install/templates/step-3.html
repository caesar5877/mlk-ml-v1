<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>安装程序 - 织梦内容管理系统<?php echo $verMsg; ?></title>
<script src="../include/dedeajax2.js" language="javascript" type="text/javascript"></script>
<script language="javascript" type="text/javascript">
<!--
	function $o(tid){
		return document.getElementById(tid);
	}
	function TestDbPwd()
	{
	  var dbhost = $o('dbhost').value;
		var dbname = $o('dbname').value;
		var dbuser = $o('dbuser').value;
		var dbpwd = $o('dbpwd').value;
		var myajax = new DedeAjax($o('dbpwdsta'),false,true,'-','-','...');
		myajax.SendGet2('index.php?step=10&dbhost='+dbhost+'&dbuser='+dbuser+'&dbname='+dbname+'&dbpwd='+dbpwd);
    DedeXHTTP = null;
	}
	function DoInstall()
	{
		//$o('postloader').style.display = 'block';
		document.form1.submit();
	}
-->
</script>
<link href="style.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id='postloader' class='waitpage'></div>
<form action="index.php" method="post" name="form1">
<input type="hidden" name="step" value="4" />
<div class="top">
	<div class="top-logo">
		<h1>织梦内容管理系统<?php echo $verMsg; ?> 安装程序</h1>
	</div>
	<div class="top-link">
		<ul>
			<li><a href="http://www.dedecms.com" target="_blank">官方网站</a></li>
			<li><a href="http://bbs.dedecms.com" target="_blank">技术论坛</a></li>
			<li><a href="http://help.dedecms.com" target="_blank">帮助</a></li>
		</ul>
	</div>
	<div class="top-version">
		<!-- 版本信息 -->
		<h2>DEDECMS<?php echo $verMsg; ?></h2>
	</div>
</div>

<div class="main">
	<div class="pleft">
		<dl class="setpbox t1">
			<dt>安装步骤</dt>
			<dd>
				<ul>
					<li class="succeed">许可协议</li>
					<li class="succeed">环境检测</li>
					<li class="now">参数配置</li>
					<li>正在安装</li>
					<li>安装完成</li>
				</ul>
			</dd>
		</dl>
	</div>
	<div class="pright">
		<div class="pr-title"><h3>数据库设定</h3></div>
		<table width="726" border="0" align="center" cellpadding="0" cellspacing="0" class="twbox">
			<tr>
				<td class="onetd"><strong>数据库主机：</strong></td>
				<td><input name="dbhost" id="dbhost" type="text" value="localhost" class="input-txt" />
				<small>一般为localhost</small></td>
			</tr>
			<tr>
				<td class="onetd"><strong>数据库名称：</strong></td>
				<td>
					<input name="dbname" id="dbname" type="text" value="<?php echo $dfDbname; ?>" class="input-txt" />
				</td>
			</tr>
			<tr>
				<td class="onetd"><strong>数据库用户：</strong></td>
				<td><input name="dbuser" id="dbuser" type="text" value="root" class="input-txt" /></td>
			</tr>
			<tr>
				<td class="onetd"><strong>数据库密码：</strong></td>
				<td>
				  <div style='float:left;margin-right:3px;'><input name="dbpwd" id="dbpwd" type="text" class="input-txt" onChange="TestDbPwd()" /></div>
				  <div style='float:left' id='dbpwdsta'></div>
				</td>
			</tr>
			<tr>
				<td class="onetd"><strong>数据表前缀：</strong></td>
				<td><input name="dbprefix" type="text" value="dede_" class="input-txt" />
						<small>如无特殊需要,请不要修改</small></td>
			</tr>
			<tr>
				<td class="onetd"><strong>数据库编码：</strong></td>
				<td>
						<?php
						if($s_lang=='utf-8')
						{
						?>
						<input type="radio" name="dblang" id="dblang_utf8" value="utf8" checked="checked" /><label for="dblang_latin1">UTF8</label>
						<?php
						}
						else
						{
						?>
						<input type="radio" name="dblang" id="dblang_gbk" value="gbk" checked="checked" /><label for="dblang_gbk">GBK</label>
						<input type="radio" name="dblang" id="dblang_latin1" value="latin1" /><label for="dblang_latin1">LATIN1</label>
						<?php
						}
						?>
						<small>仅对4.1+以上版本的MySql选择</small>
				</td>
			</tr>
		</table>

		<div class="pr-title"><h3>管理员初始密码</h3></div>
		<table width="726" border="0" align="center" cellpadding="0" cellspacing="0" class="twbox">
			<tr>
				<td class="onetd"><strong>用户名：</strong></td>
				<td>
					<input name="adminuser" type="text" value="admin" class="input-txt" />
					<p><small>只能用'0-9'、'a-z'、'A-Z'、'.'、'@'、'_'、'-'、'!'以内范围的字符</small></p>
				</td>
			</tr>
			<tr>
				<td class="onetd"><strong>密　码：</strong></td>
				<td><input name="adminpwd" type="text" value="admin" class="input-txt" /></td>
			</tr>
			<tr>
				<td class="onetd"><strong>Cookie加密码：</strong></td>
				<td><input name="cookieencode" type="text" value="<?php echo $rnd_cookieEncode; ?>" class="input-txt" /></td>
			</tr>
		</table>

		<div class="pr-title"><h3>网站设置</h3></div>
		<input name="cmspath" type="hidden" class="input-txt" value="<?php echo $basepath; ?>" />
		<table width="726" border="0" align="center" cellpadding="0" cellspacing="0" class="twbox">
			<tr>
				<td class="onetd"><strong>语言选择：</strong></td>
				<td>
					<?php
					foreach($lang_map_arr as $code => $name)
					{
						if($code=='gb2312') echo "<input type='checkbox' name='setuplangs[]' value='$code' checked /> $name($code) ";
						else echo "<input type='checkbox' name='setuplangs[]' value='$code' /> $name($code) ";
					}
					?>
				</td>
			</tr>
			<tr>
				<td class="onetd"><strong>默认前台语言：</strong></td>
				<td>
					<?php
					foreach($lang_map_arr as $code => $name)
					{
						if($code=='gb2312') echo "<input type='radio' name='dflang' value='$code' checked /> $name($code) ";
						else echo "<input type='radio' name='dflang' value='$code' /> $name($code) ";
					}
					?>
				</td>
			</tr>
			<tr>
				<td class="onetd"><strong>栏目归档选项：</strong></td>
				<td>
					<input type='radio' name='isdefault' value='-1' checked /> 全动态浏览
					<input type='radio' name='isdefault' value='1' /> 生成静态HTML(需手动更新)
				</td>
			</tr>
			<tr>
				<td class="onetd"><strong> 网站域名：</strong></td>
				<td><input name="baseurl" type="text" value="<?php echo $baseurl; ?>" class="input-txt" /></td>
			</tr>
			<tr>
				<td class="onetd"><strong>公司名称：</strong></td>
				<td>
					<input name="webname" type="text" value="DEDECMS多语言企业建站平台" class="input-txt" />
				</td>
			</tr>
			<tr>
				<td class="onetd"><strong>联 系 人：</strong></td>
				<td>
					<input name="linkman" type="text" value="" class="input-txt" />
				</td>
			</tr>
			<tr>
				<td class="onetd"><strong>联系电话：</strong></td>
				<td>
					<input name="tel" type="text" value="" class="input-txt" />
				</td>
			</tr>
			<tr>
				<td class="onetd"><strong>公司传真：</strong></td>
				<td>
					<input name="fax" type="text" value="" class="input-txt" />
				</td>
			</tr>
			<tr>
				<td class="onetd"><strong>联系邮箱：</strong></td>
				<td><input name="adminmail" type="text" value="admin@site.com" class="input-txt" /></td>
			</tr>
			<tr>
				<td class="onetd"><strong>公司地址：</strong></td>
				<td>
					<input name="address" type="text" value="" class="input-txt" style="width:300px" />
				</td>
			</tr>
			<tr>
				<td class="onetd"><strong>导航选择：</strong></td>
				<td>
					<?php
					foreach($install_lang['gb2312'] as $k=>$v)
					{
						echo "			<input type='checkbox' name='navs[]' value='$k' checked/> $v &nbsp;\r\n";
					}
					?>
				</td>
			</tr>
			<tr>
				<td class="onetd"><strong>风格选择：</strong></td>
				<td>
					<!-- //三组一行 -->
					<div class='skinline'>
					<input type='radio' name='dfstyle' value='default' checked/><img src='images/skin-default.gif' width='150' />
					&nbsp;
					<input type='radio' name='dfstyle' value='skin-red' /><img src='images/skin-skin-red.gif' width='150' />
					</div>
				</td>
			</tr>
		</table>
		<div class="btn-box">
			<input type="button" class="btn-back" value="后退" onclick="window.location.href='index.php?step=2';" />
			<input type="button" class="btn-next" value="开始安装" onclick="DoInstall();" />
		</div>
	</div>
</div>
<div class="foot">
</div>
</form>
</body>
</html>
